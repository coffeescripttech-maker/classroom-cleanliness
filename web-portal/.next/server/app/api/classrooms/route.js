/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/classrooms/route";
exports.ids = ["app/api/classrooms/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$":
/*!****************************************************!*\
  !*** ./node_modules/mysql2/lib/ sync ^cardinal.*$ ***!
  \****************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist\\client\\components\\action-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist\\client\\components\\action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist\\client\\components\\request-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist\\client\\components\\request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!*********************************************************************************************!*\
  !*** external "next/dist\\client\\components\\static-generation-async-storage.external.js" ***!
  \*********************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist\\client\\components\\static-generation-async-storage.external.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclassrooms%2Froute&page=%2Fapi%2Fclassrooms%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclassrooms%2Froute.ts&appDir=C%3A%5CUsers%5CACER%5CDesktop%5C2025%20Capstone%20Project%5CCLEANLENESS%5Cweb-portal%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CACER%5CDesktop%5C2025%20Capstone%20Project%5CCLEANLENESS%5Cweb-portal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclassrooms%2Froute&page=%2Fapi%2Fclassrooms%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclassrooms%2Froute.ts&appDir=C%3A%5CUsers%5CACER%5CDesktop%5C2025%20Capstone%20Project%5CCLEANLENESS%5Cweb-portal%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CACER%5CDesktop%5C2025%20Capstone%20Project%5CCLEANLENESS%5Cweb-portal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_ACER_Desktop_2025_Capstone_Project_CLEANLENESS_web_portal_app_api_classrooms_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/classrooms/route.ts */ \"(rsc)/./app/api/classrooms/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/classrooms/route\",\n        pathname: \"/api/classrooms\",\n        filename: \"route\",\n        bundlePath: \"app/api/classrooms/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\ACER\\\\Desktop\\\\2025 Capstone Project\\\\CLEANLENESS\\\\web-portal\\\\app\\\\api\\\\classrooms\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_ACER_Desktop_2025_Capstone_Project_CLEANLENESS_web_portal_app_api_classrooms_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/classrooms/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjbGFzc3Jvb21zJTJGcm91dGUmcGFnZT0lMkZhcGklMkZjbGFzc3Jvb21zJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGY2xhc3Nyb29tcyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNBQ0VSJTVDRGVza3RvcCU1QzIwMjUlMjBDYXBzdG9uZSUyMFByb2plY3QlNUNDTEVBTkxFTkVTUyU1Q3dlYi1wb3J0YWwlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q0FDRVIlNUNEZXNrdG9wJTVDMjAyNSUyMENhcHN0b25lJTIwUHJvamVjdCU1Q0NMRUFOTEVORVNTJTVDd2ViLXBvcnRhbCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN3RDtBQUNySTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHVHQUF1RztBQUMvRztBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzZKOztBQUU3SiIsInNvdXJjZXMiOlsid2VicGFjazovL2NsYXNzcm9vbS1jbGVhbmxpbmVzcy1wb3J0YWwvPzRhYjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcQUNFUlxcXFxEZXNrdG9wXFxcXDIwMjUgQ2Fwc3RvbmUgUHJvamVjdFxcXFxDTEVBTkxFTkVTU1xcXFx3ZWItcG9ydGFsXFxcXGFwcFxcXFxhcGlcXFxcY2xhc3Nyb29tc1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY2xhc3Nyb29tcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NsYXNzcm9vbXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2NsYXNzcm9vbXMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxBQ0VSXFxcXERlc2t0b3BcXFxcMjAyNSBDYXBzdG9uZSBQcm9qZWN0XFxcXENMRUFOTEVORVNTXFxcXHdlYi1wb3J0YWxcXFxcYXBwXFxcXGFwaVxcXFxjbGFzc3Jvb21zXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2NsYXNzcm9vbXMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgaGVhZGVySG9va3MsIHN0YXRpY0dlbmVyYXRpb25CYWlsb3V0LCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclassrooms%2Froute&page=%2Fapi%2Fclassrooms%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclassrooms%2Froute.ts&appDir=C%3A%5CUsers%5CACER%5CDesktop%5C2025%20Capstone%20Project%5CCLEANLENESS%5Cweb-portal%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CACER%5CDesktop%5C2025%20Capstone%20Project%5CCLEANLENESS%5Cweb-portal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/classrooms/route.ts":
/*!*************************************!*\
  !*** ./app/api/classrooms/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/server/web/exports/next-response.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n\n\n\n// GET /api/classrooms - List all classrooms\nasync function GET(request) {\n    try {\n        // Check authentication\n        const user = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.getCurrentUser)();\n        if (!user) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Authentication required\"\n            }, {\n                status: 401\n            });\n        }\n        const searchParams = request.nextUrl.searchParams;\n        const page = parseInt(searchParams.get(\"page\") || \"1\");\n        const limit = parseInt(searchParams.get(\"limit\") || \"10\");\n        const search = searchParams.get(\"search\") || \"\";\n        const grade_level_id = searchParams.get(\"grade_level_id\");\n        const active = searchParams.get(\"active\");\n        const offset = (page - 1) * limit;\n        // Build query\n        let whereConditions = [];\n        let params = [];\n        if (search) {\n            whereConditions.push(\"(c.name LIKE ? OR c.building LIKE ?)\");\n            params.push(`%${search}%`, `%${search}%`);\n        }\n        if (grade_level_id) {\n            whereConditions.push(\"s.grade_level_id = ?\");\n            params.push(grade_level_id);\n        }\n        if (active !== null && active !== undefined) {\n            whereConditions.push(\"c.active = ?\");\n            params.push(active === \"true\" ? 1 : 0);\n        }\n        // Class presidents can only see their own classroom\n        if (user.role === \"class_president\" && user.classroom_id) {\n            whereConditions.push(\"c.id = ?\");\n            params.push(user.classroom_id);\n        }\n        // Students cannot access classroom details\n        if (user.role === \"student\") {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Access denied\"\n            }, {\n                status: 403\n            });\n        }\n        const whereClause = whereConditions.length > 0 ? \"WHERE \" + whereConditions.join(\" AND \") : \"\";\n        // Get total count\n        const countQuery = `\r\n      SELECT COUNT(*) as total\r\n      FROM classrooms c\r\n      LEFT JOIN sections s ON c.section_id = s.id\r\n      LEFT JOIN grade_levels g ON s.grade_level_id = g.id\r\n      ${whereClause}\r\n    `;\n        const [countResult] = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.query)(countQuery, params);\n        const total = countResult.total;\n        // Get paginated data\n        const dataQuery = `\r\n      SELECT \r\n        c.*,\r\n        s.name as section_name,\r\n        s.room_number,\r\n        g.name as grade_level_name,\r\n        g.level as grade_level\r\n      FROM classrooms c\r\n      LEFT JOIN sections s ON c.section_id = s.id\r\n      LEFT JOIN grade_levels g ON s.grade_level_id = g.id\r\n      ${whereClause}\r\n      ORDER BY g.level, s.name, c.name\r\n      LIMIT ? OFFSET ?\r\n    `;\n        const classrooms = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.query)(dataQuery, [\n            ...params,\n            limit,\n            offset\n        ]);\n        const response = {\n            data: classrooms,\n            total,\n            page,\n            limit,\n            totalPages: Math.ceil(total / limit)\n        };\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(response);\n    } catch (error) {\n        console.error(\"Error fetching classrooms:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n// POST /api/classrooms - Create new classroom\nasync function POST(request) {\n    try {\n        // Only admin can create classrooms\n        const user = await (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.getCurrentUser)();\n        if (!(0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.isAdmin)(user)) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"Admin access required\"\n            }, {\n                status: 403\n            });\n        }\n        const body = await request.json();\n        const { section_id, name, building, floor, capacity, active } = body;\n        // Validation\n        if (!section_id || !name) {\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n                success: false,\n                error: \"section_id and name are required\"\n            }, {\n                status: 400\n            });\n        }\n        const insertQuery = `\r\n      INSERT INTO classrooms (section_id, name, building, floor, capacity, active)\r\n      VALUES (?, ?, ?, ?, ?, ?)\r\n    `;\n        const result = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.query)(insertQuery, [\n            section_id,\n            name,\n            building || null,\n            floor || null,\n            capacity || null,\n            active ? 1 : 0\n        ]);\n        // Get the created classroom\n        const classroom = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.query)(\"SELECT * FROM classrooms WHERE id = ?\", [\n            result.insertId\n        ]);\n        const response = {\n            success: true,\n            data: classroom[0],\n            message: \"Classroom created successfully\"\n        };\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json(response, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Error creating classroom:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            success: false,\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFVBQVU7WUFBRXpCLFFBQVE7UUFBSTtJQUNuRCxFQUFFLE9BQU9ELE9BQVk7UUFDbkIrQixRQUFRL0IsS0FBSyxDQUFDLDZCQUE2QkE7UUFDM0MsT0FBT1Qsa0ZBQVlBLENBQUNPLElBQUksQ0FDdEI7WUFBRUMsU0FBUztZQUFPQyxPQUFPQSxNQUFNZ0MsT0FBTztRQUFDLEdBQ3ZDO1lBQUUvQixRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2NsYXNzcm9vbS1jbGVhbmxpbmVzcy1wb3J0YWwvLi9hcHAvYXBpL2NsYXNzcm9vbXMvcm91dGUudHM/ZmRlZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgeyBxdWVyeSB9IGZyb20gJ0AvbGliL2RiJztcclxuaW1wb3J0IHsgQ2xhc3Nyb29tLCBBcGlSZXNwb25zZSwgUGFnaW5hdGVkUmVzcG9uc2UgfSBmcm9tICdAL3R5cGVzJztcclxuaW1wb3J0IHsgZ2V0Q3VycmVudFVzZXIsIGlzQWRtaW4gfSBmcm9tICdAL2xpYi9hdXRoJztcclxuXHJcbi8vIEdFVCAvYXBpL2NsYXNzcm9vbXMgLSBMaXN0IGFsbCBjbGFzc3Jvb21zXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgLy8gQ2hlY2sgYXV0aGVudGljYXRpb25cclxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRDdXJyZW50VXNlcigpO1xyXG4gICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSByZXF1ZXN0Lm5leHRVcmwuc2VhcmNoUGFyYW1zO1xyXG4gICAgY29uc3QgcGFnZSA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ3BhZ2UnKSB8fCAnMScpO1xyXG4gICAgY29uc3QgbGltaXQgPSBwYXJzZUludChzZWFyY2hQYXJhbXMuZ2V0KCdsaW1pdCcpIHx8ICcxMCcpO1xyXG4gICAgY29uc3Qgc2VhcmNoID0gc2VhcmNoUGFyYW1zLmdldCgnc2VhcmNoJykgfHwgJyc7XHJcbiAgICBjb25zdCBncmFkZV9sZXZlbF9pZCA9IHNlYXJjaFBhcmFtcy5nZXQoJ2dyYWRlX2xldmVsX2lkJyk7XHJcbiAgICBjb25zdCBhY3RpdmUgPSBzZWFyY2hQYXJhbXMuZ2V0KCdhY3RpdmUnKTtcclxuICAgIFxyXG4gICAgY29uc3Qgb2Zmc2V0ID0gKHBhZ2UgLSAxKSAqIGxpbWl0O1xyXG4gICAgXHJcbiAgICAvLyBCdWlsZCBxdWVyeVxyXG4gICAgbGV0IHdoZXJlQ29uZGl0aW9ucyA9IFtdO1xyXG4gICAgbGV0IHBhcmFtczogYW55W10gPSBbXTtcclxuICAgIFxyXG4gICAgaWYgKHNlYXJjaCkge1xyXG4gICAgICB3aGVyZUNvbmRpdGlvbnMucHVzaCgnKGMubmFtZSBMSUtFID8gT1IgYy5idWlsZGluZyBMSUtFID8pJyk7XHJcbiAgICAgIHBhcmFtcy5wdXNoKGAlJHtzZWFyY2h9JWAsIGAlJHtzZWFyY2h9JWApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICBpZiAoZ3JhZGVfbGV2ZWxfaWQpIHtcclxuICAgICAgd2hlcmVDb25kaXRpb25zLnB1c2goJ3MuZ3JhZGVfbGV2ZWxfaWQgPSA/Jyk7XHJcbiAgICAgIHBhcmFtcy5wdXNoKGdyYWRlX2xldmVsX2lkKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKGFjdGl2ZSAhPT0gbnVsbCAmJiBhY3RpdmUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICB3aGVyZUNvbmRpdGlvbnMucHVzaCgnYy5hY3RpdmUgPSA/Jyk7XHJcbiAgICAgIHBhcmFtcy5wdXNoKGFjdGl2ZSA9PT0gJ3RydWUnID8gMSA6IDApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBDbGFzcyBwcmVzaWRlbnRzIGNhbiBvbmx5IHNlZSB0aGVpciBvd24gY2xhc3Nyb29tXHJcbiAgICBpZiAodXNlci5yb2xlID09PSAnY2xhc3NfcHJlc2lkZW50JyAmJiB1c2VyLmNsYXNzcm9vbV9pZCkge1xyXG4gICAgICB3aGVyZUNvbmRpdGlvbnMucHVzaCgnYy5pZCA9ID8nKTtcclxuICAgICAgcGFyYW1zLnB1c2godXNlci5jbGFzc3Jvb21faWQpO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBTdHVkZW50cyBjYW5ub3QgYWNjZXNzIGNsYXNzcm9vbSBkZXRhaWxzXHJcbiAgICBpZiAodXNlci5yb2xlID09PSAnc3R1ZGVudCcpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQWNjZXNzIGRlbmllZCcgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAzIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgY29uc3Qgd2hlcmVDbGF1c2UgPSB3aGVyZUNvbmRpdGlvbnMubGVuZ3RoID4gMCBcclxuICAgICAgPyAnV0hFUkUgJyArIHdoZXJlQ29uZGl0aW9ucy5qb2luKCcgQU5EICcpXHJcbiAgICAgIDogJyc7XHJcbiAgICBcclxuICAgIC8vIEdldCB0b3RhbCBjb3VudFxyXG4gICAgY29uc3QgY291bnRRdWVyeSA9IGBcclxuICAgICAgU0VMRUNUIENPVU5UKCopIGFzIHRvdGFsXHJcbiAgICAgIEZST00gY2xhc3Nyb29tcyBjXHJcbiAgICAgIExFRlQgSk9JTiBzZWN0aW9ucyBzIE9OIGMuc2VjdGlvbl9pZCA9IHMuaWRcclxuICAgICAgTEVGVCBKT0lOIGdyYWRlX2xldmVscyBnIE9OIHMuZ3JhZGVfbGV2ZWxfaWQgPSBnLmlkXHJcbiAgICAgICR7d2hlcmVDbGF1c2V9XHJcbiAgICBgO1xyXG4gICAgXHJcbiAgICBjb25zdCBbY291bnRSZXN1bHRdID0gYXdhaXQgcXVlcnk8YW55W10+KGNvdW50UXVlcnksIHBhcmFtcyk7XHJcbiAgICBjb25zdCB0b3RhbCA9IGNvdW50UmVzdWx0LnRvdGFsO1xyXG4gICAgXHJcbiAgICAvLyBHZXQgcGFnaW5hdGVkIGRhdGFcclxuICAgIGNvbnN0IGRhdGFRdWVyeSA9IGBcclxuICAgICAgU0VMRUNUIFxyXG4gICAgICAgIGMuKixcclxuICAgICAgICBzLm5hbWUgYXMgc2VjdGlvbl9uYW1lLFxyXG4gICAgICAgIHMucm9vbV9udW1iZXIsXHJcbiAgICAgICAgZy5uYW1lIGFzIGdyYWRlX2xldmVsX25hbWUsXHJcbiAgICAgICAgZy5sZXZlbCBhcyBncmFkZV9sZXZlbFxyXG4gICAgICBGUk9NIGNsYXNzcm9vbXMgY1xyXG4gICAgICBMRUZUIEpPSU4gc2VjdGlvbnMgcyBPTiBjLnNlY3Rpb25faWQgPSBzLmlkXHJcbiAgICAgIExFRlQgSk9JTiBncmFkZV9sZXZlbHMgZyBPTiBzLmdyYWRlX2xldmVsX2lkID0gZy5pZFxyXG4gICAgICAke3doZXJlQ2xhdXNlfVxyXG4gICAgICBPUkRFUiBCWSBnLmxldmVsLCBzLm5hbWUsIGMubmFtZVxyXG4gICAgICBMSU1JVCA/IE9GRlNFVCA/XHJcbiAgICBgO1xyXG4gICAgXHJcbiAgICBjb25zdCBjbGFzc3Jvb21zID0gYXdhaXQgcXVlcnk8Q2xhc3Nyb29tW10+KFxyXG4gICAgICBkYXRhUXVlcnksXHJcbiAgICAgIFsuLi5wYXJhbXMsIGxpbWl0LCBvZmZzZXRdXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICBjb25zdCByZXNwb25zZTogUGFnaW5hdGVkUmVzcG9uc2U8Q2xhc3Nyb29tPiA9IHtcclxuICAgICAgZGF0YTogY2xhc3Nyb29tcyxcclxuICAgICAgdG90YWwsXHJcbiAgICAgIHBhZ2UsXHJcbiAgICAgIGxpbWl0LFxyXG4gICAgICB0b3RhbFBhZ2VzOiBNYXRoLmNlaWwodG90YWwgLyBsaW1pdCksXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzcG9uc2UpO1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNsYXNzcm9vbXM6JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBQT1NUIC9hcGkvY2xhc3Nyb29tcyAtIENyZWF0ZSBuZXcgY2xhc3Nyb29tXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIE9ubHkgYWRtaW4gY2FuIGNyZWF0ZSBjbGFzc3Jvb21zXHJcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTtcclxuICAgIGlmICghaXNBZG1pbih1c2VyKSkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBZG1pbiBhY2Nlc3MgcmVxdWlyZWQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMyB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcclxuICAgIGNvbnN0IHsgc2VjdGlvbl9pZCwgbmFtZSwgYnVpbGRpbmcsIGZsb29yLCBjYXBhY2l0eSwgYWN0aXZlIH0gPSBib2R5O1xyXG4gICAgXHJcbiAgICAvLyBWYWxpZGF0aW9uXHJcbiAgICBpZiAoIXNlY3Rpb25faWQgfHwgIW5hbWUpIHtcclxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnc2VjdGlvbl9pZCBhbmQgbmFtZSBhcmUgcmVxdWlyZWQnIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IGluc2VydFF1ZXJ5ID0gYFxyXG4gICAgICBJTlNFUlQgSU5UTyBjbGFzc3Jvb21zIChzZWN0aW9uX2lkLCBuYW1lLCBidWlsZGluZywgZmxvb3IsIGNhcGFjaXR5LCBhY3RpdmUpXHJcbiAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPywgPylcclxuICAgIGA7XHJcbiAgICBcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5PGFueT4oaW5zZXJ0UXVlcnksIFtcclxuICAgICAgc2VjdGlvbl9pZCxcclxuICAgICAgbmFtZSxcclxuICAgICAgYnVpbGRpbmcgfHwgbnVsbCxcclxuICAgICAgZmxvb3IgfHwgbnVsbCxcclxuICAgICAgY2FwYWNpdHkgfHwgbnVsbCxcclxuICAgICAgYWN0aXZlID8gMSA6IDAsXHJcbiAgICBdKTtcclxuICAgIFxyXG4gICAgLy8gR2V0IHRoZSBjcmVhdGVkIGNsYXNzcm9vbVxyXG4gICAgY29uc3QgY2xhc3Nyb29tID0gYXdhaXQgcXVlcnk8Q2xhc3Nyb29tW10+KFxyXG4gICAgICAnU0VMRUNUICogRlJPTSBjbGFzc3Jvb21zIFdIRVJFIGlkID0gPycsXHJcbiAgICAgIFtyZXN1bHQuaW5zZXJ0SWRdXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICBjb25zdCByZXNwb25zZTogQXBpUmVzcG9uc2U8Q2xhc3Nyb29tPiA9IHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgZGF0YTogY2xhc3Nyb29tWzBdLFxyXG4gICAgICBtZXNzYWdlOiAnQ2xhc3Nyb29tIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JyxcclxuICAgIH07XHJcbiAgICBcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihyZXNwb25zZSwgeyBzdGF0dXM6IDIwMSB9KTtcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBjbGFzc3Jvb206JywgZXJyb3IpO1xyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJxdWVyeSIsImdldEN1cnJlbnRVc2VyIiwiaXNBZG1pbiIsIkdFVCIsInJlcXVlc3QiLCJ1c2VyIiwianNvbiIsInN1Y2Nlc3MiLCJlcnJvciIsInN0YXR1cyIsInNlYXJjaFBhcmFtcyIsIm5leHRVcmwiLCJwYWdlIiwicGFyc2VJbnQiLCJnZXQiLCJsaW1pdCIsInNlYXJjaCIsImdyYWRlX2xldmVsX2lkIiwiYWN0aXZlIiwib2Zmc2V0Iiwid2hlcmVDb25kaXRpb25zIiwicGFyYW1zIiwicHVzaCIsInVuZGVmaW5lZCIsInJvbGUiLCJjbGFzc3Jvb21faWQiLCJ3aGVyZUNsYXVzZSIsImxlbmd0aCIsImpvaW4iLCJjb3VudFF1ZXJ5IiwiY291bnRSZXN1bHQiLCJ0b3RhbCIsImRhdGFRdWVyeSIsImNsYXNzcm9vbXMiLCJyZXNwb25zZSIsImRhdGEiLCJ0b3RhbFBhZ2VzIiwiTWF0aCIsImNlaWwiLCJjb25zb2xlIiwibWVzc2FnZSIsIlBPU1QiLCJib2R5Iiwic2VjdGlvbl9pZCIsIm5hbWUiLCJidWlsZGluZyIsImZsb29yIiwiY2FwYWNpdHkiLCJpbnNlcnRRdWVyeSIsInJlc3VsdCIsImNsYXNzcm9vbSIsImluc2VydElkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/classrooms/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   canAccessClassroom: () => (/* binding */ canAccessClassroom),\n/* harmony export */   cleanupExpiredSessions: () => (/* binding */ cleanupExpiredSessions),\n/* harmony export */   createSession: () => (/* binding */ createSession),\n/* harmony export */   deleteSession: () => (/* binding */ deleteSession),\n/* harmony export */   getCurrentUser: () => (/* binding */ getCurrentUser),\n/* harmony export */   getUserById: () => (/* binding */ getUserById),\n/* harmony export */   getUserBySession: () => (/* binding */ getUserBySession),\n/* harmony export */   getUserByUsername: () => (/* binding */ getUserByUsername),\n/* harmony export */   hashPassword: () => (/* binding */ hashPassword),\n/* harmony export */   isAdmin: () => (/* binding */ isAdmin),\n/* harmony export */   isClassPresident: () => (/* binding */ isClassPresident),\n/* harmony export */   login: () => (/* binding */ login),\n/* harmony export */   logout: () => (/* binding */ logout),\n/* harmony export */   updateLastLogin: () => (/* binding */ updateLastLogin)\n/* harmony export */ });\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/headers.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_headers__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./db */ \"(rsc)/./lib/db.ts\");\n\n\n\n/**\r\n * Generate a secure random session ID\r\n */ function generateSessionId() {\n    const chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n    let result = \"\";\n    for(let i = 0; i < 64; i++){\n        result += chars.charAt(Math.floor(Math.random() * chars.length));\n    }\n    return result;\n}\n/**\r\n * Get user by username (includes password_hash for authentication)\r\n */ async function getUserByUsernameWithPassword(username) {\n    const connection = await _db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getConnection();\n    try {\n        const [rows] = await connection.query(\"SELECT * FROM users WHERE username = ? AND active = TRUE\", [\n            username\n        ]);\n        if (rows.length === 0) return null;\n        return rows[0];\n    } finally{\n        connection.release();\n    }\n}\n/**\r\n * Get user by username (without password_hash)\r\n */ async function getUserByUsername(username) {\n    const connection = await _db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getConnection();\n    try {\n        const [rows] = await connection.query(\"SELECT id, username, role, classroom_id, full_name, email, active, last_login, created_at FROM users WHERE username = ? AND active = TRUE\", [\n            username\n        ]);\n        if (rows.length === 0) return null;\n        return rows[0];\n    } finally{\n        connection.release();\n    }\n}\n/**\r\n * Get user by ID (without password_hash)\r\n */ async function getUserById(userId) {\n    const connection = await _db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getConnection();\n    try {\n        const [rows] = await connection.query(\"SELECT id, username, role, classroom_id, full_name, email, active, last_login, created_at FROM users WHERE id = ? AND active = TRUE\", [\n            userId\n        ]);\n        if (rows.length === 0) return null;\n        return rows[0];\n    } finally{\n        connection.release();\n    }\n}\n/**\r\n * Create a new session for a user\r\n */ async function createSession(userId) {\n    const connection = await _db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getConnection();\n    try {\n        const sessionId = generateSessionId();\n        const expiresAt = new Date();\n        expiresAt.setDate(expiresAt.getDate() + 7); // 7 days\n        await connection.query(\"INSERT INTO sessions (id, user_id, expires_at) VALUES (?, ?, ?)\", [\n            sessionId,\n            userId,\n            expiresAt\n        ]);\n        return sessionId;\n    } finally{\n        connection.release();\n    }\n}\n/**\r\n * Get user by session ID (without password_hash)\r\n */ async function getUserBySession(sessionId) {\n    const connection = await _db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getConnection();\n    try {\n        const [rows] = await connection.query(`SELECT u.id, u.username, u.role, u.classroom_id, u.full_name, u.email, u.active, u.last_login, u.created_at \r\n       FROM users u\r\n       JOIN sessions s ON u.id = s.user_id\r\n       WHERE s.id = ? AND s.expires_at > NOW() AND u.active = TRUE`, [\n            sessionId\n        ]);\n        if (rows.length === 0) return null;\n        return rows[0];\n    } finally{\n        connection.release();\n    }\n}\n/**\r\n * Delete a session (logout)\r\n */ async function deleteSession(sessionId) {\n    const connection = await _db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getConnection();\n    try {\n        await connection.query(\"DELETE FROM sessions WHERE id = ?\", [\n            sessionId\n        ]);\n    } finally{\n        connection.release();\n    }\n}\n/**\r\n * Update user's last login timestamp\r\n */ async function updateLastLogin(userId) {\n    const connection = await _db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getConnection();\n    try {\n        await connection.query(\"UPDATE users SET last_login = NOW() WHERE id = ?\", [\n            userId\n        ]);\n    } finally{\n        connection.release();\n    }\n}\n/**\r\n * Clean up expired sessions\r\n */ async function cleanupExpiredSessions() {\n    const connection = await _db__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getConnection();\n    try {\n        await connection.query(\"DELETE FROM sessions WHERE expires_at < NOW()\");\n    } finally{\n        connection.release();\n    }\n}\n/**\r\n * Login user with username and password\r\n */ async function login(username, password) {\n    const userWithPassword = await getUserByUsernameWithPassword(username);\n    if (!userWithPassword) return null;\n    // Get password hash from user object\n    const passwordHash = userWithPassword.password_hash;\n    if (!passwordHash) return null;\n    // Verify password\n    const valid = await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().compare(password, passwordHash);\n    if (!valid) return null;\n    // Create session\n    const sessionId = await createSession(userWithPassword.id);\n    // Update last login\n    await updateLastLogin(userWithPassword.id);\n    // Set cookie\n    (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)().set(\"session\", sessionId, {\n        httpOnly: true,\n        secure: \"development\" === \"production\",\n        sameSite: \"lax\",\n        maxAge: 60 * 60 * 24 * 7,\n        path: \"/\"\n    });\n    // Return user without password_hash\n    const user = await getUserByUsername(username);\n    return user;\n}\n/**\r\n * Logout current user\r\n */ async function logout() {\n    const sessionId = (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)().get(\"session\")?.value;\n    if (sessionId) {\n        await deleteSession(sessionId);\n    }\n    (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)().delete(\"session\");\n}\n/**\r\n * Get current logged-in user\r\n */ async function getCurrentUser() {\n    const sessionId = (0,next_headers__WEBPACK_IMPORTED_MODULE_0__.cookies)().get(\"session\")?.value;\n    if (!sessionId) return null;\n    return await getUserBySession(sessionId);\n}\n/**\r\n * Check if user has permission to access a classroom\r\n */ async function canAccessClassroom(user, classroomId) {\n    if (!user) return false;\n    // Admin can access all\n    if (user.role === \"admin\") return true;\n    // Class president can only access their classroom\n    if (user.role === \"class_president\") {\n        return user.classroom_id === classroomId;\n    }\n    // Students cannot access classroom details\n    return false;\n}\n/**\r\n * Check if user is admin\r\n */ function isAdmin(user) {\n    return user?.role === \"admin\";\n}\n/**\r\n * Check if user is class president\r\n */ function isClassPresident(user) {\n    return user?.role === \"class_president\";\n}\n/**\r\n * Hash password for storage\r\n */ async function hashPassword(password) {\n    return await bcryptjs__WEBPACK_IMPORTED_MODULE_1___default().hash(password, 10);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ekIsWUFBWXZCLHFEQUFPQSxHQUFHaUQsR0FBRyxDQUFDLFlBQVlDO0lBQzVDLElBQUkzQixXQUFXO1FBQ2IsTUFBTU0sY0FBY047SUFDdEI7SUFDQXZCLHFEQUFPQSxHQUFHbUQsTUFBTSxDQUFDO0FBQ25CO0FBRUE7O0NBRUMsR0FDTSxlQUFlQztJQUNwQixNQUFNN0IsWUFBWXZCLHFEQUFPQSxHQUFHaUQsR0FBRyxDQUFDLFlBQVlDO0lBQzVDLElBQUksQ0FBQzNCLFdBQVcsT0FBTztJQUV2QixPQUFPLE1BQU1LLGlCQUFpQkw7QUFDaEM7QUFFQTs7Q0FFQyxHQUNNLGVBQWU4QixtQkFBbUJOLElBQWlCLEVBQUVPLFdBQW1CO0lBQzdFLElBQUksQ0FBQ1AsTUFBTSxPQUFPO0lBRWxCLHVCQUF1QjtJQUN2QixJQUFJQSxLQUFLUSxJQUFJLEtBQUssU0FBUyxPQUFPO0lBRWxDLGtEQUFrRDtJQUNsRCxJQUFJUixLQUFLUSxJQUFJLEtBQUssbUJBQW1CO1FBQ25DLE9BQU9SLEtBQUtTLFlBQVksS0FBS0Y7SUFDL0I7SUFFQSwyQ0FBMkM7SUFDM0MsT0FBTztBQUNUO0FBRUE7O0NBRUMsR0FDTSxTQUFTRyxRQUFRVixJQUFpQjtJQUN2QyxPQUFPQSxNQUFNUSxTQUFTO0FBQ3hCO0FBRUE7O0NBRUMsR0FDTSxTQUFTRyxpQkFBaUJYLElBQWlCO0lBQ2hELE9BQU9BLE1BQU1RLFNBQVM7QUFDeEI7QUFFQTs7Q0FFQyxHQUNNLGVBQWVJLGFBQWExQixRQUFnQjtJQUNqRCxPQUFPLE1BQU1oQyxvREFBVyxDQUFDZ0MsVUFBVTtBQUNyQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NsYXNzcm9vbS1jbGVhbmxpbmVzcy1wb3J0YWwvLi9saWIvYXV0aC50cz9iZjdlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnO1xyXG5pbXBvcnQgYmNyeXB0IGZyb20gJ2JjcnlwdGpzJztcclxuaW1wb3J0IHBvb2wgZnJvbSAnLi9kYic7XHJcbmltcG9ydCB7IFJvd0RhdGFQYWNrZXQsIFJlc3VsdFNldEhlYWRlciB9IGZyb20gJ215c3FsMic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFVzZXIge1xyXG4gIGlkOiBudW1iZXI7XHJcbiAgdXNlcm5hbWU6IHN0cmluZztcclxuICByb2xlOiAnYWRtaW4nIHwgJ2NsYXNzX3ByZXNpZGVudCcgfCAnc3R1ZGVudCc7XHJcbiAgY2xhc3Nyb29tX2lkOiBudW1iZXIgfCBudWxsO1xyXG4gIGZ1bGxfbmFtZTogc3RyaW5nO1xyXG4gIGVtYWlsOiBzdHJpbmcgfCBudWxsO1xyXG4gIGFjdGl2ZTogYm9vbGVhbjtcclxuICBsYXN0X2xvZ2luOiBEYXRlIHwgbnVsbDtcclxuICBjcmVhdGVkX2F0OiBEYXRlO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNlc3Npb24ge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgdXNlcl9pZDogbnVtYmVyO1xyXG4gIGV4cGlyZXNfYXQ6IERhdGU7XHJcbiAgY3JlYXRlZF9hdDogRGF0ZTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdlbmVyYXRlIGEgc2VjdXJlIHJhbmRvbSBzZXNzaW9uIElEXHJcbiAqL1xyXG5mdW5jdGlvbiBnZW5lcmF0ZVNlc3Npb25JZCgpOiBzdHJpbmcge1xyXG4gIGNvbnN0IGNoYXJzID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5JztcclxuICBsZXQgcmVzdWx0ID0gJyc7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCA2NDsgaSsrKSB7XHJcbiAgICByZXN1bHQgKz0gY2hhcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJzLmxlbmd0aCkpO1xyXG4gIH1cclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IHVzZXIgYnkgdXNlcm5hbWUgKGluY2x1ZGVzIHBhc3N3b3JkX2hhc2ggZm9yIGF1dGhlbnRpY2F0aW9uKVxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5VXNlcm5hbWVXaXRoUGFzc3dvcmQodXNlcm5hbWU6IHN0cmluZyk6IFByb21pc2U8YW55IHwgbnVsbD4ge1xyXG4gIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcclxuICB0cnkge1xyXG4gICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICAnU0VMRUNUICogRlJPTSB1c2VycyBXSEVSRSB1c2VybmFtZSA9ID8gQU5EIGFjdGl2ZSA9IFRSVUUnLFxyXG4gICAgICBbdXNlcm5hbWVdXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICBpZiAocm93cy5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xyXG4gICAgXHJcbiAgICByZXR1cm4gcm93c1swXTtcclxuICB9IGZpbmFsbHkge1xyXG4gICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0IHVzZXIgYnkgdXNlcm5hbWUgKHdpdGhvdXQgcGFzc3dvcmRfaGFzaClcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyQnlVc2VybmFtZSh1c2VybmFtZTogc3RyaW5nKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xyXG4gIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcclxuICB0cnkge1xyXG4gICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICAnU0VMRUNUIGlkLCB1c2VybmFtZSwgcm9sZSwgY2xhc3Nyb29tX2lkLCBmdWxsX25hbWUsIGVtYWlsLCBhY3RpdmUsIGxhc3RfbG9naW4sIGNyZWF0ZWRfYXQgRlJPTSB1c2VycyBXSEVSRSB1c2VybmFtZSA9ID8gQU5EIGFjdGl2ZSA9IFRSVUUnLFxyXG4gICAgICBbdXNlcm5hbWVdXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICBpZiAocm93cy5sZW5ndGggPT09IDApIHJldHVybiBudWxsO1xyXG4gICAgXHJcbiAgICByZXR1cm4gcm93c1swXSBhcyBVc2VyO1xyXG4gIH0gZmluYWxseSB7XHJcbiAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdXNlciBieSBJRCAod2l0aG91dCBwYXNzd29yZF9oYXNoKVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXJCeUlkKHVzZXJJZDogbnVtYmVyKTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xyXG4gIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcclxuICB0cnkge1xyXG4gICAgY29uc3QgW3Jvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5xdWVyeTxSb3dEYXRhUGFja2V0W10+KFxyXG4gICAgICAnU0VMRUNUIGlkLCB1c2VybmFtZSwgcm9sZSwgY2xhc3Nyb29tX2lkLCBmdWxsX25hbWUsIGVtYWlsLCBhY3RpdmUsIGxhc3RfbG9naW4sIGNyZWF0ZWRfYXQgRlJPTSB1c2VycyBXSEVSRSBpZCA9ID8gQU5EIGFjdGl2ZSA9IFRSVUUnLFxyXG4gICAgICBbdXNlcklkXVxyXG4gICAgKTtcclxuICAgIFxyXG4gICAgaWYgKHJvd3MubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcclxuICAgIFxyXG4gICAgcmV0dXJuIHJvd3NbMF0gYXMgVXNlcjtcclxuICB9IGZpbmFsbHkge1xyXG4gICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGEgbmV3IHNlc3Npb24gZm9yIGEgdXNlclxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVNlc3Npb24odXNlcklkOiBudW1iZXIpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcclxuICB0cnkge1xyXG4gICAgY29uc3Qgc2Vzc2lvbklkID0gZ2VuZXJhdGVTZXNzaW9uSWQoKTtcclxuICAgIGNvbnN0IGV4cGlyZXNBdCA9IG5ldyBEYXRlKCk7XHJcbiAgICBleHBpcmVzQXQuc2V0RGF0ZShleHBpcmVzQXQuZ2V0RGF0ZSgpICsgNyk7IC8vIDcgZGF5c1xyXG4gICAgXHJcbiAgICBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KFxyXG4gICAgICAnSU5TRVJUIElOVE8gc2Vzc2lvbnMgKGlkLCB1c2VyX2lkLCBleHBpcmVzX2F0KSBWQUxVRVMgKD8sID8sID8pJyxcclxuICAgICAgW3Nlc3Npb25JZCwgdXNlcklkLCBleHBpcmVzQXRdXHJcbiAgICApO1xyXG4gICAgXHJcbiAgICByZXR1cm4gc2Vzc2lvbklkO1xyXG4gIH0gZmluYWxseSB7XHJcbiAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgdXNlciBieSBzZXNzaW9uIElEICh3aXRob3V0IHBhc3N3b3JkX2hhc2gpXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlckJ5U2Vzc2lvbihzZXNzaW9uSWQ6IHN0cmluZyk6IFByb21pc2U8VXNlciB8IG51bGw+IHtcclxuICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IFtyb3dzXSA9IGF3YWl0IGNvbm5lY3Rpb24ucXVlcnk8Um93RGF0YVBhY2tldFtdPihcclxuICAgICAgYFNFTEVDVCB1LmlkLCB1LnVzZXJuYW1lLCB1LnJvbGUsIHUuY2xhc3Nyb29tX2lkLCB1LmZ1bGxfbmFtZSwgdS5lbWFpbCwgdS5hY3RpdmUsIHUubGFzdF9sb2dpbiwgdS5jcmVhdGVkX2F0IFxyXG4gICAgICAgRlJPTSB1c2VycyB1XHJcbiAgICAgICBKT0lOIHNlc3Npb25zIHMgT04gdS5pZCA9IHMudXNlcl9pZFxyXG4gICAgICAgV0hFUkUgcy5pZCA9ID8gQU5EIHMuZXhwaXJlc19hdCA+IE5PVygpIEFORCB1LmFjdGl2ZSA9IFRSVUVgLFxyXG4gICAgICBbc2Vzc2lvbklkXVxyXG4gICAgKTtcclxuICAgIFxyXG4gICAgaWYgKHJvd3MubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbDtcclxuICAgIFxyXG4gICAgcmV0dXJuIHJvd3NbMF0gYXMgVXNlcjtcclxuICB9IGZpbmFsbHkge1xyXG4gICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogRGVsZXRlIGEgc2Vzc2lvbiAobG9nb3V0KVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVNlc3Npb24oc2Vzc2lvbklkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoJ0RFTEVURSBGUk9NIHNlc3Npb25zIFdIRVJFIGlkID0gPycsIFtzZXNzaW9uSWRdKTtcclxuICB9IGZpbmFsbHkge1xyXG4gICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogVXBkYXRlIHVzZXIncyBsYXN0IGxvZ2luIHRpbWVzdGFtcFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUxhc3RMb2dpbih1c2VySWQ6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xyXG4gIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcclxuICB0cnkge1xyXG4gICAgYXdhaXQgY29ubmVjdGlvbi5xdWVyeShcclxuICAgICAgJ1VQREFURSB1c2VycyBTRVQgbGFzdF9sb2dpbiA9IE5PVygpIFdIRVJFIGlkID0gPycsXHJcbiAgICAgIFt1c2VySWRdXHJcbiAgICApO1xyXG4gIH0gZmluYWxseSB7XHJcbiAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDbGVhbiB1cCBleHBpcmVkIHNlc3Npb25zXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xlYW51cEV4cGlyZWRTZXNzaW9ucygpOiBQcm9taXNlPHZvaWQ+IHtcclxuICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgcG9vbC5nZXRDb25uZWN0aW9uKCk7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGNvbm5lY3Rpb24ucXVlcnkoJ0RFTEVURSBGUk9NIHNlc3Npb25zIFdIRVJFIGV4cGlyZXNfYXQgPCBOT1coKScpO1xyXG4gIH0gZmluYWxseSB7XHJcbiAgICBjb25uZWN0aW9uLnJlbGVhc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMb2dpbiB1c2VyIHdpdGggdXNlcm5hbWUgYW5kIHBhc3N3b3JkXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9naW4odXNlcm5hbWU6IHN0cmluZywgcGFzc3dvcmQ6IHN0cmluZyk6IFByb21pc2U8VXNlciB8IG51bGw+IHtcclxuICBjb25zdCB1c2VyV2l0aFBhc3N3b3JkID0gYXdhaXQgZ2V0VXNlckJ5VXNlcm5hbWVXaXRoUGFzc3dvcmQodXNlcm5hbWUpO1xyXG4gIGlmICghdXNlcldpdGhQYXNzd29yZCkgcmV0dXJuIG51bGw7XHJcbiAgXHJcbiAgLy8gR2V0IHBhc3N3b3JkIGhhc2ggZnJvbSB1c2VyIG9iamVjdFxyXG4gIGNvbnN0IHBhc3N3b3JkSGFzaCA9IHVzZXJXaXRoUGFzc3dvcmQucGFzc3dvcmRfaGFzaDtcclxuICBpZiAoIXBhc3N3b3JkSGFzaCkgcmV0dXJuIG51bGw7XHJcbiAgXHJcbiAgLy8gVmVyaWZ5IHBhc3N3b3JkXHJcbiAgY29uc3QgdmFsaWQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShwYXNzd29yZCwgcGFzc3dvcmRIYXNoKTtcclxuICBpZiAoIXZhbGlkKSByZXR1cm4gbnVsbDtcclxuICBcclxuICAvLyBDcmVhdGUgc2Vzc2lvblxyXG4gIGNvbnN0IHNlc3Npb25JZCA9IGF3YWl0IGNyZWF0ZVNlc3Npb24odXNlcldpdGhQYXNzd29yZC5pZCk7XHJcbiAgXHJcbiAgLy8gVXBkYXRlIGxhc3QgbG9naW5cclxuICBhd2FpdCB1cGRhdGVMYXN0TG9naW4odXNlcldpdGhQYXNzd29yZC5pZCk7XHJcbiAgXHJcbiAgLy8gU2V0IGNvb2tpZVxyXG4gIGNvb2tpZXMoKS5zZXQoJ3Nlc3Npb24nLCBzZXNzaW9uSWQsIHtcclxuICAgIGh0dHBPbmx5OiB0cnVlLFxyXG4gICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxyXG4gICAgc2FtZVNpdGU6ICdsYXgnLFxyXG4gICAgbWF4QWdlOiA2MCAqIDYwICogMjQgKiA3LCAvLyA3IGRheXNcclxuICAgIHBhdGg6ICcvJ1xyXG4gIH0pO1xyXG4gIFxyXG4gIC8vIFJldHVybiB1c2VyIHdpdGhvdXQgcGFzc3dvcmRfaGFzaFxyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRVc2VyQnlVc2VybmFtZSh1c2VybmFtZSk7XHJcbiAgcmV0dXJuIHVzZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMb2dvdXQgY3VycmVudCB1c2VyXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbG9nb3V0KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gIGNvbnN0IHNlc3Npb25JZCA9IGNvb2tpZXMoKS5nZXQoJ3Nlc3Npb24nKT8udmFsdWU7XHJcbiAgaWYgKHNlc3Npb25JZCkge1xyXG4gICAgYXdhaXQgZGVsZXRlU2Vzc2lvbihzZXNzaW9uSWQpO1xyXG4gIH1cclxuICBjb29raWVzKCkuZGVsZXRlKCdzZXNzaW9uJyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgY3VycmVudCBsb2dnZWQtaW4gdXNlclxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEN1cnJlbnRVc2VyKCk6IFByb21pc2U8VXNlciB8IG51bGw+IHtcclxuICBjb25zdCBzZXNzaW9uSWQgPSBjb29raWVzKCkuZ2V0KCdzZXNzaW9uJyk/LnZhbHVlO1xyXG4gIGlmICghc2Vzc2lvbklkKSByZXR1cm4gbnVsbDtcclxuICBcclxuICByZXR1cm4gYXdhaXQgZ2V0VXNlckJ5U2Vzc2lvbihzZXNzaW9uSWQpO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgdXNlciBoYXMgcGVybWlzc2lvbiB0byBhY2Nlc3MgYSBjbGFzc3Jvb21cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjYW5BY2Nlc3NDbGFzc3Jvb20odXNlcjogVXNlciB8IG51bGwsIGNsYXNzcm9vbUlkOiBudW1iZXIpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICBpZiAoIXVzZXIpIHJldHVybiBmYWxzZTtcclxuICBcclxuICAvLyBBZG1pbiBjYW4gYWNjZXNzIGFsbFxyXG4gIGlmICh1c2VyLnJvbGUgPT09ICdhZG1pbicpIHJldHVybiB0cnVlO1xyXG4gIFxyXG4gIC8vIENsYXNzIHByZXNpZGVudCBjYW4gb25seSBhY2Nlc3MgdGhlaXIgY2xhc3Nyb29tXHJcbiAgaWYgKHVzZXIucm9sZSA9PT0gJ2NsYXNzX3ByZXNpZGVudCcpIHtcclxuICAgIHJldHVybiB1c2VyLmNsYXNzcm9vbV9pZCA9PT0gY2xhc3Nyb29tSWQ7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIFN0dWRlbnRzIGNhbm5vdCBhY2Nlc3MgY2xhc3Nyb29tIGRldGFpbHNcclxuICByZXR1cm4gZmFsc2U7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiB1c2VyIGlzIGFkbWluXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNBZG1pbih1c2VyOiBVc2VyIHwgbnVsbCk6IGJvb2xlYW4ge1xyXG4gIHJldHVybiB1c2VyPy5yb2xlID09PSAnYWRtaW4nO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgdXNlciBpcyBjbGFzcyBwcmVzaWRlbnRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0NsYXNzUHJlc2lkZW50KHVzZXI6IFVzZXIgfCBudWxsKTogYm9vbGVhbiB7XHJcbiAgcmV0dXJuIHVzZXI/LnJvbGUgPT09ICdjbGFzc19wcmVzaWRlbnQnO1xyXG59XHJcblxyXG4vKipcclxuICogSGFzaCBwYXNzd29yZCBmb3Igc3RvcmFnZVxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhc2hQYXNzd29yZChwYXNzd29yZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICByZXR1cm4gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIDEwKTtcclxufVxyXG4iXSwibmFtZXMiOlsiY29va2llcyIsImJjcnlwdCIsInBvb2wiLCJnZW5lcmF0ZVNlc3Npb25JZCIsImNoYXJzIiwicmVzdWx0IiwiaSIsImNoYXJBdCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImxlbmd0aCIsImdldFVzZXJCeVVzZXJuYW1lV2l0aFBhc3N3b3JkIiwidXNlcm5hbWUiLCJjb25uZWN0aW9uIiwiZ2V0Q29ubmVjdGlvbiIsInJvd3MiLCJxdWVyeSIsInJlbGVhc2UiLCJnZXRVc2VyQnlVc2VybmFtZSIsImdldFVzZXJCeUlkIiwidXNlcklkIiwiY3JlYXRlU2Vzc2lvbiIsInNlc3Npb25JZCIsImV4cGlyZXNBdCIsIkRhdGUiLCJzZXREYXRlIiwiZ2V0RGF0ZSIsImdldFVzZXJCeVNlc3Npb24iLCJkZWxldGVTZXNzaW9uIiwidXBkYXRlTGFzdExvZ2luIiwiY2xlYW51cEV4cGlyZWRTZXNzaW9ucyIsImxvZ2luIiwicGFzc3dvcmQiLCJ1c2VyV2l0aFBhc3N3b3JkIiwicGFzc3dvcmRIYXNoIiwicGFzc3dvcmRfaGFzaCIsInZhbGlkIiwiY29tcGFyZSIsImlkIiwic2V0IiwiaHR0cE9ubHkiLCJzZWN1cmUiLCJwcm9jZXNzIiwic2FtZVNpdGUiLCJtYXhBZ2UiLCJwYXRoIiwidXNlciIsImxvZ291dCIsImdldCIsInZhbHVlIiwiZGVsZXRlIiwiZ2V0Q3VycmVudFVzZXIiLCJjYW5BY2Nlc3NDbGFzc3Jvb20iLCJjbGFzc3Jvb21JZCIsInJvbGUiLCJjbGFzc3Jvb21faWQiLCJpc0FkbWluIiwiaXNDbGFzc1ByZXNpZGVudCIsImhhc2hQYXNzd29yZCIsImhhc2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   testConnection: () => (/* binding */ testConnection)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"(rsc)/./node_modules/mysql2/promise.js\");\n\nconst pool = mysql2_promise__WEBPACK_IMPORTED_MODULE_0__.createPool({\n    host: process.env.DB_HOST || \"localhost\",\n    user: process.env.DB_USER || \"root\",\n    password: process.env.DB_PASSWORD || \"\",\n    database: process.env.DB_NAME || \"classroom_cleanliness\",\n    waitForConnections: true,\n    connectionLimit: 10,\n    queueLimit: 0\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (pool);\n// Helper function for queries\nasync function query(sql, params) {\n    const [results] = await pool.execute(sql, params);\n    return results;\n}\n// Test connection\nasync function testConnection() {\n    try {\n        const connection = await pool.getConnection();\n        console.log(\" Database connected successfully\");\n        connection.release();\n        return true;\n    } catch (error) {\n        console.error(\" Database connection failed:\", error);\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFtQztBQUVuQyxNQUFNQyxPQUFPRCxzREFBZ0IsQ0FBQztJQUM1QkcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDQyxPQUFPLElBQUk7SUFDN0JDLE1BQU1ILFFBQVFDLEdBQUcsQ0FBQ0csT0FBTyxJQUFJO0lBQzdCQyxVQUFVTCxRQUFRQyxHQUFHLENBQUNLLFdBQVcsSUFBSTtJQUNyQ0MsVUFBVVAsUUFBUUMsR0FBRyxDQUFDTyxPQUFPLElBQUk7SUFDakNDLG9CQUFvQjtJQUNwQkMsaUJBQWlCO0lBQ2pCQyxZQUFZO0FBQ2Q7QUFFQSxpRUFBZWQsSUFBSUEsRUFBQztBQUVwQiw4QkFBOEI7QUFDdkIsZUFBZWUsTUFBZUMsR0FBVyxFQUFFQyxNQUFjO0lBQzlELE1BQU0sQ0FBQ0MsUUFBUSxHQUFHLE1BQU1sQixLQUFLbUIsT0FBTyxDQUFDSCxLQUFLQztJQUMxQyxPQUFPQztBQUNUO0FBRUEsa0JBQWtCO0FBQ1gsZUFBZUU7SUFDcEIsSUFBSTtRQUNGLE1BQU1DLGFBQWEsTUFBTXJCLEtBQUtzQixhQUFhO1FBQzNDQyxRQUFRQyxHQUFHLENBQUM7UUFDWkgsV0FBV0ksT0FBTztRQUNsQixPQUFPO0lBQ1QsRUFBRSxPQUFPQyxPQUFPO1FBQ2RILFFBQVFHLEtBQUssQ0FBQyxpQ0FBaUNBO1FBQy9DLE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2xhc3Nyb29tLWNsZWFubGluZXNzLXBvcnRhbC8uL2xpYi9kYi50cz8xZGYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBteXNxbCBmcm9tICdteXNxbDIvcHJvbWlzZSc7XHJcblxyXG5jb25zdCBwb29sID0gbXlzcWwuY3JlYXRlUG9vbCh7XHJcbiAgaG9zdDogcHJvY2Vzcy5lbnYuREJfSE9TVCB8fCAnbG9jYWxob3N0JyxcclxuICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSIHx8ICdyb290JyxcclxuICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQgfHwgJycsXHJcbiAgZGF0YWJhc2U6IHByb2Nlc3MuZW52LkRCX05BTUUgfHwgJ2NsYXNzcm9vbV9jbGVhbmxpbmVzcycsXHJcbiAgd2FpdEZvckNvbm5lY3Rpb25zOiB0cnVlLFxyXG4gIGNvbm5lY3Rpb25MaW1pdDogMTAsXHJcbiAgcXVldWVMaW1pdDogMCxcclxufSk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBwb29sO1xyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIGZvciBxdWVyaWVzXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBxdWVyeTxUID0gYW55PihzcWw6IHN0cmluZywgcGFyYW1zPzogYW55W10pOiBQcm9taXNlPFQ+IHtcclxuICBjb25zdCBbcmVzdWx0c10gPSBhd2FpdCBwb29sLmV4ZWN1dGUoc3FsLCBwYXJhbXMpO1xyXG4gIHJldHVybiByZXN1bHRzIGFzIFQ7XHJcbn1cclxuXHJcbi8vIFRlc3QgY29ubmVjdGlvblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdGVzdENvbm5lY3Rpb24oKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBhd2FpdCBwb29sLmdldENvbm5lY3Rpb24oKTtcclxuICAgIGNvbnNvbGUubG9nKCfinJMgRGF0YWJhc2UgY29ubmVjdGVkIHN1Y2Nlc3NmdWxseScpO1xyXG4gICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcign4pyXIERhdGFiYXNlIGNvbm5lY3Rpb24gZmFpbGVkOicsIGVycm9yKTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIm15c3FsIiwicG9vbCIsImNyZWF0ZVBvb2wiLCJob3N0IiwicHJvY2VzcyIsImVudiIsIkRCX0hPU1QiLCJ1c2VyIiwiREJfVVNFUiIsInBhc3N3b3JkIiwiREJfUEFTU1dPUkQiLCJkYXRhYmFzZSIsIkRCX05BTUUiLCJ3YWl0Rm9yQ29ubmVjdGlvbnMiLCJjb25uZWN0aW9uTGltaXQiLCJxdWV1ZUxpbWl0IiwicXVlcnkiLCJzcWwiLCJwYXJhbXMiLCJyZXN1bHRzIiwiZXhlY3V0ZSIsInRlc3RDb25uZWN0aW9uIiwiY29ubmVjdGlvbiIsImdldENvbm5lY3Rpb24iLCJjb25zb2xlIiwibG9nIiwicmVsZWFzZSIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/mysql2","vendor-chunks/iconv-lite","vendor-chunks/aws-ssl-profiles","vendor-chunks/long","vendor-chunks/denque","vendor-chunks/is-property","vendor-chunks/lru.min","vendor-chunks/sqlstring","vendor-chunks/named-placeholders","vendor-chunks/seq-queue","vendor-chunks/generate-function","vendor-chunks/safer-buffer","vendor-chunks/bcryptjs"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclassrooms%2Froute&page=%2Fapi%2Fclassrooms%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclassrooms%2Froute.ts&appDir=C%3A%5CUsers%5CACER%5CDesktop%5C2025%20Capstone%20Project%5CCLEANLENESS%5Cweb-portal%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CACER%5CDesktop%5C2025%20Capstone%20Project%5CCLEANLENESS%5Cweb-portal&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();